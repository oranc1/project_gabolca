<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itwillbs.project_gabolcar.mapper.CarMapper">
	<insert id="registerCar">
		insert into
			car_info
		values (
			null,
			#{car_type},
			#{car_number},
			#{car_company},
			#{car_model},
			#{car_old},
			#{car_shift_type},
			#{car_fuel_type},
			#{car_riding},
			#{car_age},
			#{car_career},
			#{car_license},
			#{car_weekdays},
			#{car_weekend},
			#{brc_name},
			#{car_image_url},
			default
		)
	</insert>
	
	<select id="selectCarList" resultType="map">
		select
			*
		from
			car_info
	</select>
		<select id="selectCar" resultType="map" parameterType="int">
		select
			*
		from
			car_info
		where
			car_idx = #{car_idx}
	</select>
	<update id="updateCar" parameterType="map">
		update
			car_info
		set
			car_type = #{car_type},
			car_number = #{car_number},
			car_company = #{car_company},
			car_model = #{car_model},
			car_old = #{car_old},
			car_shift_type = #{car_shift_type},
			car_fuel_type = #{car_fuel_type},
			car_riding = #{car_riding},
			car_age = #{car_age},
			car_career = #{car_career},
			car_license = #{car_license},
			car_weekdays = #{car_weekdays},
			car_weekend = #{car_weekend},
			brc_name = #{brc_name},
<!-- 			car_image_url = #{car_image_url}, -->
			car_status = #{car_status}
		where
			car_idx=#{car_idx}
	</update>
	<delete id="deleteCar" parameterType="int">
		delete from
			car_info
		where
			car_idx=#{car_idx}
	</delete>
    <insert id="registerOption" parameterType="String">
        insert into
            option_list
        values(
            null
            , #{option_name}
            , #{option_image_url}    
        )
    </insert>
   	<select id="selectOptionList" resultType="map">
		select
			*
		from
			option_list
	</select>
	<select id="selectOption" resultType="map">
		select
			*
		from
			option_list
		where
			option_idx = #{option_idx}
	</select>
	<update id="deleteOptionFile" parameterType="int">
		update
			option_list
		set
			option_image_url = ''
		where
			option_idx = #{option_idx}
	</update>
	<update id="updateOption" parameterType="map">
		update
			option_list
		set
			<choose>
				<when test="#{option_image_url} == null">
					option_name = #{option_name}
				</when>
				<otherwise>
					option_name = #{option_name} 
					, option_image_url = #{option_image_url}
				</otherwise>
			</choose>
		where
			option_idx = #{option_idx}
	</update>
	<delete id="deleteOption" parameterType="int">
		delete from
			option_list
		where
			option_idx = #{option_idx }
	</delete>
</mapper>
